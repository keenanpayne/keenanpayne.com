---
layout: layouts/base.njk
permalink: "/{{ title | slug }}/"
---
{# TODO: Create generic abstractions for similarities with `service.njk` #}

{% import "organisms/newsletter.njk" as  newsletter with context %}

{% set date = page.date %}

<section class="portfolio">
  <header class="portfolio-header">
    <div class="portfolio-meta">
      {%- if type -%}
        <a class="-underline-hover _label" href="/type/{{ type | lower | plural }}" title="View archive for {{ type | lower | plural }}">
          Case Study
        </a>
      {%- endif -%}
    </div>

    <h1 class="portfolio-title">
      {{ title }}
    </h1>
  </header>

  <div class="portfolio-content">
    {% set client = case_study.client %}
    {% set project = case_study.project %}
    {% set url = case_study.url %}
    {% set role = case_study.role %}
    {% set year = case_study.year %}
    {% set cover = case_study.cover %}
    {% set description = case_study.description %}
    {% set challenges = case_study.challenges %}
    {% set solution = case_study.solution %}
    {% set services = case_study.services %}

    {# TODO: Check for existence of values for table #}
    <div class="portfolio-details">
      {% if description %}
        <div class="portfolio-detail -full-width -description">
          <p class="_label">The client</p>
          <p class="_text-h6">{{ description | safe }}</p>
        </div>
      {% endif %}

      {% if challenges %}
        <div class="portfolio-detail -full-width -description">
          <p class="_label">Challenges</p>
          <p class="_text-h6">{{ challenges | safe }}</p>
        </div>
      {% endif %}

      {% if solution %}
        <div class="portfolio-detail -full-width -description">
          <p class="_label">The solution</p>
          <p class="_text-h6">{{ solution | safe }}</p>
        </div>
      {% endif %}

      {% if year %}
        <div class="portfolio-detail -year">
          <p class="_label">Year</p>
          <p>{{ year }}</p>
        </div>
      {% endif %}

      {% if services %}
        <div class="portfolio-detail -services">
          <p class="_label">Services Offered</p>

          <ul>
            {% for service in services %}
              <li>{{ service }}</li>
            {% endfor %}
          </ul>
        </div>
      {% endif %}

      
      <div class="portfolio-detail">
        <p><a href="{{ url }}" title="Visit {{ client }} {{ project }}" target="_blank" rel="noopener">Visit Site â† </a></p>
      </div>
    </div>

    {% if cover %}
      <div class="portfolio-cover">
        <img class="portfolio-cover-img" src="{{ cover }}" alt="{{ client }} project cover" />
      </div>
    {% endif %}

    {% for section in sections %}
      {% include "components/" + section.type + ".njk" %}
    {% endfor %}

    <div class="portfolio-subcontent _container -fluid">
      {{ content | safe }}
    </div>
  </div>

  {# TODO: Update this to display featured images so that other content looks more compelling #}
  {% include "components/postNav.njk" %}
</section>

{% if comments != false %}
  {% include "components/comments.html" %}
{% endif %}